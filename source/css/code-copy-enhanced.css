/* ==========================================
   增强代码复制按钮
   ========================================== */

/* 确保代码块有相对定位 */
pre,
.highlight pre,
figure.highlight pre,
.hljs {
    position: relative !important;
}

/* 复制按钮样式 */
.code-copy-btn {
    position: absolute !important;
    top: 8px !important;
    right: 8px !important;
    padding: 6px 12px !important;
    background: #ffffff !important;
    border: 1px solid #d0d7de !important;
    border-radius: 6px !important;
    font-size: 12px !important;
    font-weight: 500 !important;
    color: #24292f !important;
    cursor: pointer !important;
    opacity: 0 !important;
    transition: all 0.2s ease !important;
    z-index: 10 !important;
    user-select: none !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12) !important;
}

/* 悬停显示 */
pre:hover .code-copy-btn {
    opacity: 1 !important;
}

/* 悬停效果 */
.code-copy-btn:hover {
    background: #f3f4f6 !important;
    border-color: #8b949e !important;
    transform: scale(1.05) !important;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15) !important;
}

/* 点击效果 */
.code-copy-btn:active {
    transform: scale(0.95) !important;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) !important;
}

/* 成功状态 */
.code-copy-btn.success {
    background: #2ea043 !important;
    border-color: #2ea043 !important;
    color: white !important;
    animation: successPulse 0.5s ease !important;
}

/* 成功动画 */
@keyframes successPulse {
    0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(46, 160, 67, 0.7);
    }
    50% {
        transform: scale(1.05);
        box-shadow: 0 0 0 10px rgba(46, 160, 67, 0);
    }
    100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(46, 160, 67, 0);
    }
}

/* 复制中状态 */
.code-copy-btn.copying {
    pointer-events: none !important;
    opacity: 0.7 !important;
}

/* 夜间模式 */
[data-theme="dark"] .code-copy-btn {
    background: #21262d !important;
    border: 1px solid #30363d !important;
    color: #c9d1d9 !important;
}

[data-theme="dark"] .code-copy-btn:hover {
    background: #30363d !important;
    border-color: #484f58 !important;
}

[data-theme="dark"] .code-copy-btn.success {
    background: #238636 !important;
    border-color: #238636 !important;
}

/* 移动端始终显示 */
@media (max-width: 768px) {
    .code-copy-btn {
        opacity: 1 !important;
    }
}

/* 提示文字 */
.code-copy-tooltip {
    position: absolute !important;
    top: -30px !important;
    right: 8px !important;
    padding: 4px 8px !important;
    background: #24292f !important;
    color: white !important;
    font-size: 11px !important;
    border-radius: 4px !important;
    white-space: nowrap !important;
    pointer-events: none !important;
    opacity: 0 !important;
    transition: opacity 0.2s ease !important;
}

.code-copy-tooltip.show {
    opacity: 1 !important;
}

.code-copy-tooltip::after {
    content: '' !important;
    position: absolute !important;
    top: 100% !important;
    right: 12px !important;
    border: 4px solid transparent !important;
    border-top-color: #24292f !important;
}
